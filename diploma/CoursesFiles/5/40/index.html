<p>Продолжим работу с проектом из прошлой темы и добавим в него возможность редактирования данных.</p>
<p>Редактирование данных, как и добавление, разбивается на две части. Вначале нам надо отобразить пользователю форму для изменения выбранного объекта. Потом нам надо получить отправленные данные и сохранить их в базу данных.</p>
<p>Прежде всего определим форму для редактирования. Для этого в папке templates создадим файл edit.html.</p>
<img src="../../CoursesFiles/5/40/img/1.jpg" style="width: 25%;">
<p>Определим в файле edit.html следующий код:</p>
<img src="../../CoursesFiles/5/40/img/2.jpg">
<p>Данный файл представляет шаблон, в который из кода сервера будут передаваться редактируемые данные.</p>
<p>Теперь изменим код сервера, добавив в него возможность редактирования:</p>
<br><img src="../../CoursesFiles/5/40/img/3.jpg"><br><img src="../../CoursesFiles/5/40/img/4.jpg"><br><img src="../../CoursesFiles/5/40/img/5.jpg"><br><img src="../../CoursesFiles/5/40/img/6.jpg"><br><img src="../../CoursesFiles/5/40/img/7.jpg"><br><img src="../../CoursesFiles/5/40/img/8.jpg"><br>
<p>По сравнению с прошлой темой здесь добавлены функции EditPage и EditHandler и изменена функция main.</p>
<p>Чтобы указать, какой объект будет редактироваться, мы будем передавать через адрес id этого объекта. И для упрощения маршрутизации в данном случае мы будем использовать пакет gorilla/mux.</p>
<p>В функции IndexPage мы получаем id объекта, который надо изменить, извлекаем из БД даные этого объекта и передаем их в шаблон edit.html:</p>
<img src="../../CoursesFiles/5/40/img/9.jpg">
<p>На случай, если в базе данных не окажется объекта с подобным id, с помощью функции http.Error() возвращаем статусный код 404, который указывает, что объект не найден.</p>
<p>В функции EditHandler получаем данные из отправленной формы и с их помощью изменяем объект в базе данных по определенному id.</p>
<img src="../../CoursesFiles/5/40/img/10.jpg">
<p>После обновления БД выполняется редирект на главную страницу.</p>
<p>В функции main эти функции EditPage и EditHandler связываются с определенными маршрутами. По сути они привязаны к одному и тому же маршруту, однако для разного типа запросов: EditPage для запросов GET, а EditHandler - для запросов POST.</p>
<img src="../../CoursesFiles/5/40/img/11.jpg">
<p>Стоит отметить, что добавление данных, которое представлено в данном случае функцией CreateHandler, также фактически выполняет два действия в зависимости от типа запроса: отображает страницу для добавления и собственно добавляет данные. И в прицнипе организацию добавления можно сделать также, как и редактирование, разделив на две функции для каждого типа запросов.</p>
<p>Для упрощения управлением объектами изменим файл index.html, добавив в него ссылки на редактирование:</p>
<br> <img src="../../CoursesFiles/5/40/img/12.jpg"><br><img src="../../CoursesFiles/5/40/img/13.jpg"><br>
<p>И после запуска приложения мы сможем отредактировать нужные объекты:</p>
<img src="../../CoursesFiles/5/40/img/14.jpg">
<style>p{text-indent: 25px}img{width: 100%}</style>