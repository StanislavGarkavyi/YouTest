<p>Паттерн "Абстрактная фабрика" (Abstract Factory) предоставляет интерфейс для создания семейств взаимосвязанных объектов с определенными интерфейсами без указания конкретных типов данных объектов.</p>
<p><b>Когда использовать абстрактную фабрику</b></p>
<ul>
    <li>Когда система не должна зависеть от способа создания и компоновки новых объектов</li>
    <li>Когда создаваемые объекты должны использоваться вместе и являются взаимосвязанными</li>
</ul>
<p>С помощью UML абстрактную фабрику можно представить следующим образом:</p>
<img src="../../CoursesFiles/6/46/img/1.jpg">
<p>Формальное определение паттерна на языке C# может выглядеть следующим образом:</p><br>
<img src="../../CoursesFiles/6/46/img/2.jpg"><br>
<img src="../../CoursesFiles/6/46/img/3.jpg"><br>
<img src="../../CoursesFiles/6/46/img/4.jpg"><br>
<p>Паттерн определяет следующих участников:</p>
<ul>
    <li>Абстрактные классы AbstractProductA и AbstractProductB определяют интерфейс для классов, объекты которых будут создаваться в программе.</li>
    <li>Конкретные классы ProductA1 / ProductA2 и ProductB1 / ProductB2 представляют конкретную реализацию абстрактных классов</li>
    <li>Абстрактный класс фабрики AbstractFactory определяет методы для создания объектов. Причем методы возвращают абстрактные продукты, а не их конкретные реализации.</li>
    <li>Конкретные классы фабрик ConcreteFactory1 и ConcreteFactory2 реализуют абстрактные методы базового класса и непосредственно определяют какие конкретные продукты использовать</li>
    <li>Класс клиента Client использует класс фабрики для создания объектов. При этом он использует исключительно абстрактный класс фабрики AbstractFactory и абстрактные классы продуктов AbstractProductA и AbstractProductB и никак не зависит от их конкретных реализаций</li>
</ul>
<p>Посмотрим, как мы можем применить паттерн. Например, мы делаем игру, где пользователь должен управлять некими супергероями, при этом каждый супергерой имеет определенное оружие и определенную модель передвижения. Различные супергерои могут определяться комплексом признаков. Например, эльф может летать и должен стрелять из арбалета, другой супергерой должен бегать и управлять мечом. Таким образом, получается, что сущность оружия и модель передвижения являются взаимосвязанными и используются в комплексе. То есть имеется один из доводов в пользу использования абстрактной фабрики.</p>
<p>И кроме того, наша задача при проектировании игры абстрагировать создание супергероев от самого класса супергероя, чтобы создать более гибкую архитектуру. И для этого применим абстрактную фабрику:</p>
<img src="../../CoursesFiles/6/46/img/5.jpg"><br>
<img src="../../CoursesFiles/6/46/img/6.jpg"><br>
<img src="../../CoursesFiles/6/46/img/7.jpg"><br>
<img src="../../CoursesFiles/6/46/img/8.jpg"><br>
<img src="../../CoursesFiles/6/46/img/9.jpg"><br>
<img src="../../CoursesFiles/6/46/img/10.jpg"><br>
<p>Таким образом, создание супергероя абстрагируется от самого класса супергероя. В то же время нельзя не отметить и недостатки шаблона. В частности, если нам захочется добавить в конфигурацию супергероя новый объект, например, тип одежды, то придется переделывать классы фабрик и класс супергероя. Поэтому возможности по расширению в данном паттерне имеют некоторые ограничения.</p>
<style>p{text-indent: 25px;}</style>