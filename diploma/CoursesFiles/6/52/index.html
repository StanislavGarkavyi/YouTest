<p>Паттерн Итератор (Iterator) предоставляет абстрактный интерфейс для последовательного доступа ко всем элементам составного объекта без раскрытия его внутренней структуры.</p>
<p>Наверное, всем программистам, работающим с языком C#, приходилось иметь дело с циклом foreach, который перебирает объекты в массиве или коллекции. При этом встроенных классов коллекций существует множество, и каждая из них отличается по своей структуре и поведению.</p>
<p>Ключевым моментом, который позволяет осуществить перебор коллекций с помощью foreach, является применения этими классами коллекций паттерна итератор, или проще говоря пары интерфейсов IEnumerable / IEnumerator. Интерфейс IEnumerator определяет функционал для перебора внутренних объектов в контейнере:</p>
<img src="../../CoursesFiles/6/52/img/1.jpg">
<p>А интерфейс IEnumerable использует IEnumerator для получения итератора для конкретного типа объекта:</p>
<img src="../../CoursesFiles/6/52/img/2.jpg">
<p>Используя данные интерфейсы, мы можем свести к одному шаблону - с помощью цикла foreach - любые составные объекты.</p>
<p><b>Когда использовать итераторы?</b></p>
<ul>
    <li>Когда необходимо осуществить обход объекта без раскрытия его внутренней структуры</li>
    <li>Когда имеется набор составных объектов, и надо обеспечить единый интерфейс для их перебора</li>
    <li>Когда необходимо предоставить несколько альтернативных вариантов перебора одного и того же объекта</li>
</ul>
<p>С помощью схем UML итераторы можно описать так:</p>
<img src="../../CoursesFiles/6/52/img/3.jpg">
<p>Формальное определение паттерна на C# может выглядеть следующим образом:</p>
<br>
<img src="../../CoursesFiles/6/52/img/4.jpg"><br>
<img src="../../CoursesFiles/6/52/img/5.jpg"><br>
<img src="../../CoursesFiles/6/52/img/6.jpg"><br>
<img src="../../CoursesFiles/6/52/img/7.jpg"><br>
<img src="../../CoursesFiles/6/52/img/8.jpg"><br>
<p><b>Участники</b></p>
<ul>
    <li>Iterator: определяет интерфейс для обхода составных объектов</li>
    <li>Aggregate: определяет интерфейс для создания объекта-итератора</li>
    <li>ConcreteIterator: конкретная реализация итератора для обхода объекта Aggregate. Для фиксации индекса текущего перебираемого элемента использует целочисленную переменную _current</li>
    <li>ConcreteAggregate: конкретная реализация Aggregate. Хранит элементы, которые надо будет перебирать</li>
    <li>Client: использует объект Aggregate и итератор для его обхода</li>
</ul>
<style>p{text-indent: 25px;}</style>