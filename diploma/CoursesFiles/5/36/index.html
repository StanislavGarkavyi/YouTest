<p>Ранее рассматривалось, как в Go отправлять статические файла, в частности, html-страницы. Определение контента в виде html-страниц довольно удобно: мы используем преимущества html+css+javascript, отделяем представление от основной логики, которая пишется на Go. Однако статические страницы малополезны, когда нам необходимо динамически генерировать некоторый контент на основании различных факторов, например, параметров, переданных через строку запроса. И в этом случае мы можем воспользоваться шаблонами.</p>
<p>Язык Go предоставляет функциональность шаблонов по умолчанию в виде пакета html/template.</p>
<p>Используем протейший шаблон:</p>
<img src="../../CoursesFiles/5/36/img/1.jpg">
<p>С помощью функции template.New("data") определяется имя шаблона. Затем для установки самого шаблона используется функция Parse("<h1>{{ .}}</h1>"). В данном случае шаблон фактически представляет заголовок h1. Но ключевым элементом здесь является двойная пара фигурных скобок {{ .}}. Они позволяют вводить в разметку html различные данные. Здесь в качестве данных указана точка. Точка указывает на контекст шаблона - то есть все данные, которые переданы шаблону.</p>
<p>Стоит отметить, что функция Parse возвращает два значения: собственно шаблон (в данном случае переменная tmpl) и объект ошибки (при ее возникновении). В данном случае объект ошибки не используется, поэтому вместо него идет прочерк.</p>
<p>Чтобы передать шаблону данные, сгенерировать итоговую html-разметку и отправить ее в ответ на запрос, применяется функция Execute:</p>
<img src="../../CoursesFiles/5/36/img/2.jpg">
<p>В данном случае переменная data представляет строку, и это как раз те данные, которые будут вставляться в шаблон вместо точки {{ .}}. Ну а первый параметр - это объект http.ResponseWriter, через который отправляются данные.</p>
<p>В итоге при обращении к приложению мы увидим следующий результат:</p>
<img src="../../CoursesFiles/5/36/img/3.jpg">
<p>Шаблон может принимать более сложные данные, которые описываются структурой. Например:</p>
<br><img src="../../CoursesFiles/5/36/img/4.jpg"><br><img src="../../CoursesFiles/5/36/img/5.jpg">

<p>Здесь данные, передаваемые в шаблон, описываются структурой ViewData, и данная структура будет представлять контекст шаблона. Поэтому чтобы обратиться к отдельным ее переменным, надо после точки указать название переменной: {{ .Title}}.</p>
<p>Стоит отметить, что названия переменных следует определять с большой буквы.</p>
<p>Так как в данном случае используются сложные данные, то их надо обернуть в функцию template.Must(). Сам код шаблона можно переносить на несколько строк, в этом случае код помещается в косые кавычки. Если код шаблона размещается на одной строке, то можно использовать обычные кавычки.</p>
<p>Результат работы программы:</p>
<img src="../../CoursesFiles/5/36/img/6.jpg">
<p>Однако определение шаблона внутри кода на Go - нелучший вариант, особенно когда шаблон содержит много сложной html-разметки, вкрапления стилей и скриптов javascript. Поэтому более оптимально определять шаблоны в виде отдельных файлов. Например, определим в проекте папку templates, а в ней создадим файл index.html.</p>
<img src="../../CoursesFiles/5/36/img/7.jpg">
<p>Определим в index.html следующий код:</p>
<img src="../../CoursesFiles/5/36/img/8.jpg">
<p>Используем этот шаблон в коде сервера:</p>
<br><img src="../../CoursesFiles/5/36/img/9.jpg"><br><img src="../../CoursesFiles/5/36/img/10.jpg">
<p>Для получения кода из файла применяется функция template.ParseFiles(), которой передается путь к файлу. Итоговый результат будет почти таким же, как и в предыдущим случае:</p>
<img src="../../CoursesFiles/5/36/img/11.jpg">
<style>p{text-indent: 25px;}</style>