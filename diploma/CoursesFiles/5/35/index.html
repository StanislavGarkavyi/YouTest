<p>Go предоставляет базовые возможности по маршрутизации. Однако этих возможностей, как правило, было недостаточно, особенно в тех случаях, когда необходимо выделять сегменты из запрошенного адреса URL и каким-то образом обрабатывать их. В этом случае мы можем воспользоваться рядом существующих инструментов, одним из которых является Gorilla. (Официальный сайт http://www.gorillatoolkit.org/) Это пакет разработчика специально для упрощения создания веб-приложений на языке Go, который, в свою очередь, включает ряд пакетов:</p>
<ul>
    <li>gorilla/context: предназначен для создания глобальных переменных из тела запроса</li>
    <li>gorilla/rpc: представляет реализацию протокола RPC-JSON</li>
    <li>gorilla/websocket: реализует протокол WebSocket</li>
    <li>gorilla/schema: позволяет создавать из значений формы единую структуру</li>
    <li>gorilla/securecookie: позволяет создавать зашифрованные куки, которые применяются при аутентификации</li>
    <li>gorilla/sessions: обеспечивает поддержку сессий</li>
    <li>gorilla/mux: позволяет определять более сложные маршруты, которые могут использовать регулярные выражения</li>
    <li>gorilla/reverse: используется для создания регулярных выражений для маршрутов</li>
</ul>
<p>В данном случае задействуем возможности по созданию маршрутов с помощью gorilla/mux и для установки данного пакета выполним в командной строке/терминале следующую команду:</p>
<img src="../../CoursesFiles/5/35/img/1.jpg">
<p>Определим следующий код сервера:</p><br>
<img src="../../CoursesFiles/5/35/img/2.jpg"><br>
<img src="../../CoursesFiles/5/35/img/3.jpg">
<p>Для определения маршрутов с помощью gorilla/mux применяется функция mux.NewRouter(). У возвращаемого этой функцией объекта мы можем вызвать метод HandleFunc, который сопоставляет маршрут с определенным обработчиком.</p>
<p>Первый параметр представляет шаблон пути запроса. В фигурных скобках мы можем определить параметр в формате имя_параметра:регулярное_выражение. Регулярное выражение определять необязательно, но если оно определено, то параметр должен соответствовать этому выражению. То есть в данном случае параметр id должен представлять числовое значение.</p>
<p>Второй параметр - функция обработчика запросов, по указанному в первом параметре маршруту. Подобная функция должна иметь два параметра: func(w http.ResponseWriter, r *http.Request).</p>
<p>В данном случае функция обработчика - productsHandler - получает параметры пути запроса через функцию mux.Vars. Затем из полученного объекта можно извлечь название нужного нам параметра: id := vars["id"]. Название параметра здесь то же самое, что в определение маршрута.</p>
<p>В итоге при обращении к приложению по запросу localhost:8181/products/2 мы получим следующий вывод:
</p>
<img src="../../CoursesFiles/5/35/img/4.jpg">
<p>Если бы мы захотели бы сделать то же самое, но штатными средствами, которые есть в Go без gorilla/mux, то нам бы пришлось писать дополнительный код для парсинга запрошенного пути.</p>
<p>Подобным образом мы можем использовать несколько параметров:</p>
<br><img src="../../CoursesFiles/5/35/img/5.jpg"><br><img src="../../CoursesFiles/5/35/img/6.jpg">
<p>В данном случае определены два параметра: id и category.</p>
<img src="../../CoursesFiles/5/35/img/7.jpg">
<p>Можно определять несколько маршрутов, которые могут использовать либо различные, либо одни и те же обработчики:</p>
<br><img src="../../CoursesFiles/5/35/img/8.jpg"><br><img src="../../CoursesFiles/5/35/img/9.jpg"><style>p{text-indent: 25px;}</style>